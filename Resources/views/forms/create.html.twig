{% extends "@c975LGiftVoucher/layout.html.twig" %}
{% trans_default_domain 'giftVoucher' %}
{% set title = 'label.gift_voucher'|trans ~ ' (' ~ 'label.create'|trans({}, 'toolbar') ~ ')' %}

{% block giftVoucher_content %}
{# Toolbar #}
    {{ toolbar_display('@c975LGiftVoucher/tools.html.twig', 'create', 'md') }}
    <div class="row">
        <p class="alert alert-info text-center">
            {{ 'text.create_info'|trans }}
        </p>
{# Form #}
        {{ form_start(form) }}
            {{ form_widget(form) }}
{# Submit #}
            <div class="form-group">
                <button type="submit" name="submit" title="{{ 'label.validate'|trans({}, 'toolbar') }}" class="btn btn-lg btn-primary btn-block">
                    {{ 'label.validate'|trans({}, 'toolbar') }}
                </button>
            </div>
        {{ form_end(form) }}
    </div>
{# Javascript #}
    <script type="text/javascript">
        $(document).ready(function() {
{# Update semantic url #}
            $('#gift_voucher_available_object')
                .change(function() {
                    var slugUrl = '{{ absolute_url(path('giftvoucher_slug', {'text': 'TEXT'})) }}';
                    var slug = $.post(slugUrl.replace('TEXT', $('#gift_voucher_available_object').val()));
                    slug.done(function(data) {
                        if (data.a != 'false') {
                            $('#gift_voucher_available_slug')
                                .val(data.a);
                        }
                    });
                });
        });
    </script>
{% endblock %}
